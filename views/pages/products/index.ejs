<%- include('../../partials/header') %>
<h1>All Products</h1>
<form method="GET" action="/products">
  <label>Filter by Category:
    <select name="category_id" onchange="this.form.submit()">
      <option value="">All</option>
      <% categories.forEach(category => { %>
        <option value="<%= category.id %>" <%= selectedCategoryId === category.id ? 'selected' : '' %>><%= category.name %></option>
      <% }); %>
    </select>
  </label>
</form>
<ul>
  <% if (products.length > 0) { %> <% products.forEach(product => { %>
  <li>
    <% if (product.image_url) { %>
    <img src="<%= product.image_url %>" alt="<%= product.name %>" width="50" />
    <% } %>
    <a href="/products/<%= product.id %>"><%= product.name %></a>
    (<%= product.part_number %>) - <%= product.status %> <% if
    (product.category_name) { %> - <%= product.category_name %><% } %>
  </li>
  <% }); %> <% } else { %>
  <li>No products found.</li>
  <% } %>
</ul>
<a href="/products/new">Add Product</a>
<%- include('../../partials/footer') %>
